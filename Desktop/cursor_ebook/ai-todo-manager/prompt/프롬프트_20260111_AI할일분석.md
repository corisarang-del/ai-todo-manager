# 프롬프트: AI 할 일 분석 및 요약 기능 구현

**작성시각**: 2026-01-11 20:14

## 사용자 요청

```
사용자가 할 일 목록을 분석해 요약과 인사이트를 제공하는 기능을 구현해 주세요.

1. 구현조건
 - 메인 화면에 <AI 요약 및 분석> 섹션 추가
 - <오늘의 요약>과 <이번 주 요약>탭에서 [AI요약] 버튼과 기능 연결
 - 지금 쓰고 있는 gemini 모델 사용
 - 기존 Gemini API 설정 재활용
 - 오늘의 요약: 당일 할 일만 분석
 - 이번 주 요약: 이번 주 전체 할 일 분석
 - 완료율, 마감일, 우선순위 분포 포함
 - 시간대별 업무 집중도 분석
 - 실행 가능한 추천사항 제공
 - 한국어로 자연스럽고 친근한 문체 유지
 - Supabase에서 사용자별 데이터 조회
 - [ai 요약] 버튼을 클릭하면 로딩상태 표시

2. API입력
 - 사용자의 할 일 목록 데이터(완료/미완료 포함)
 - 분석 기간(today/week)

3. 출력 예시
{
 summary: "총 8개의 할 일 중 5개 완료(62.5%)",
 urgentTasks: ["프로젝트 발표 준비", "보고서 제출"],
 insights: ["오늘 오후 시간대에 할 일이 집중되어 있습니다.", "2개의 긴급 작업이 내일 마감입니다."],
 recommendations: ["긴급한 업무부터 우선 처리하세요.", "오후 일정을 조정하는것을 고려해 보세요."]
}
```

## 구현 내용

### 1. API Route (`app/api/analyze-todos/route.ts`)

**통계 계산**:
```typescript
const totalTodos = todos.length;
const completedTodos = todos.filter((t: any) => t.completed).length;
const completionRate = ((completedTodos / totalTodos) * 100).toFixed(1);

const priorityCount = {
  high: todos.filter((t: any) => t.priority === 'high').length,
  medium: todos.filter((t: any) => t.priority === 'medium').length,
  low: todos.filter((t: any) => t.priority === 'low').length,
};

// 카테고리별, 시간대별 분포 계산
```

**Gemini API 프롬프트**:
```typescript
prompt: `당신은 할 일 관리 전문가이자 생산성 코치입니다.

**분석 기간**: ${period === 'today' ? '오늘' : '이번 주'}

**할 일 목록 데이터**: ${JSON.stringify(todos)}

**통계**:
- 전체 할 일: ${totalTodos}개
- 완료: ${completedTodos}개 (${completionRate}%)
- 우선순위 분포: 높음 ${priorityCount.high}개, 보통 ${priorityCount.medium}개
- 시간대 분포: 오전 ${timeDistribution.morning}개, 오후 ${timeDistribution.afternoon}개

다음 형식으로 분석 결과를 제공해주세요:
1. summary: 전체 상황 요약 (친근하고 격려하는 톤)
2. urgentTasks: 긴급 작업 목록 (최대 5개)
3. insights: 데이터 기반 인사이트 3-5개
4. recommendations: 실행 가능한 추천사항 3-5개
`
```

### 2. 프론트엔드 컴포넌트 (`components/todo/AiSummary.tsx`)

**탭 UI**:
```tsx
<Tabs value={activeTab} onValueChange={setActiveTab}>
  <TabsList>
    <TabsTrigger value="today">오늘의 요약</TabsTrigger>
    <TabsTrigger value="week">이번 주 요약</TabsTrigger>
  </TabsList>
</Tabs>
```

**AI 요약 버튼**:
```tsx
<Button onClick={handleAnalyze} disabled={isAnalyzing}>
  {isAnalyzing ? (
    <>
      <Loader2 className="animate-spin" />
      AI가 분석 중...
    </>
  ) : (
    <>
      <Sparkles />
      AI 요약
    </>
  )}
</Button>
```

**분석 결과 표시**:
```tsx
{result && (
  <>
    <Card className="bg-gradient-to-r from-purple-50 to-blue-50">
      <p>{result.summary}</p>
    </Card>
    
    {/* 긴급 작업 */}
    {result.urgentTasks.map(task => (
      <Badge variant="destructive">{task}</Badge>
    ))}
    
    {/* 인사이트 */}
    {result.insights.map(insight => (
      <li>💡 {insight}</li>
    ))}
    
    {/* 추천사항 */}
    {result.recommendations.map(rec => (
      <li>✅ {rec}</li>
    ))}
  </>
)}
```

### 3. 메인 페이지 통합

```tsx
import { AiSummary } from "@/components/todo/AiSummary";

<AiSummary todos={todos} />
```

## 검증 방법

### 1. 오늘의 요약 테스트
- "오늘의 요약" 탭 선택
- "AI 요약" 버튼 클릭
- 로딩 스피너 확인
- 분석 결과 확인

### 2. 이번 주 요약 테스트
- "이번 주 요약" 탭 선택
- "AI 요약" 버튼 클릭
- 이번 주 전체 할 일 분석 확인

### 3. 다양한 시나리오
- 할 일이 없을 때
- 모두 완료했을 때
- 긴급 작업이 많을 때
- 마감일 지난 작업이 있을 때

## 성공 확인

✅ 모든 기능이 정상 작동
✅ AI 분석 결과가 정확하고 유용함
✅ 로딩 상태 표시 정상
✅ 오늘/이번 주 필터링 정확

## 참고 문서
- 개발일지: `개발일지/20260111_AI할일분석.md`
- API Route: `app/api/analyze-todos/route.ts`
- 컴포넌트: `components/todo/AiSummary.tsx`
