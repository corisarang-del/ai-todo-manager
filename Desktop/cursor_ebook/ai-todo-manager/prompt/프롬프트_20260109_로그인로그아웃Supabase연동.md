# 프롬프트 - 로그인/로그아웃 기능 Supabase 연동

**작성 시각**: 2026-01-09 14:36:05

## 요청 내용

@app/login/page.tsx 파일에 Supabase 로그인 기능 추가 및 로그아웃 컴포넌트 구현

### 1. 로그인 기능
- **폼 입력값 수집 및 기본 유효성 검사**
  - 이메일 형식 검증
  - 비밀번호 공백 방지

- **Supabase signInWithPassword 호출**
  - 이메일, 비밀번호 기반 로그인

- **로그인 성공 시**
  - 메인 페이지(/)로 이동
  - 세션은 Supabase Auth에서 자동 관리

- **로그인 실패 시**
  - 사용자 친화적 오류 메시지 표시
  - "이메일 또는 비밀번호가 올바르지 않아"

- **로딩 상태 처리**
  - 로그인 요청 중 버튼 비활성화
  - 스피너/텍스트 표시

### 2. 로그아웃 기능
- **supabase.auth.signOut() 호출**
  - 로그아웃 함수 구현

- **로그아웃 성공 시**
  - 세션 제거 확인
  - 로그인 페이지(/login)로 이동

- **로그아웃 실패 시**
  - 사용자에게 오류 메시지 표시

- **UI**
  - 로그인 성공 상태에서만 노출되는 로그아웃 버튼

### 구현 조건
- 화면 레이아웃과 스타일은 그대로 유지
- 기능만 구현
- 기능 구현을 위해 필요한 최소한의 UI 보완은 허용

## 결과

다음 파일들을 생성/수정:
- `app/login/page.tsx`: Supabase 로그인 기능 구현
- `components/auth/LogoutButton.tsx`: 로그아웃 버튼 컴포넌트 (신규 생성)
- `prompt/프롬프트_20260109_로그인로그아웃Supabase연동.md`: 프롬프트 파일
- `개발일지/20260109_로그인로그아웃Supabase연동.md`: 개발일지

### 주요 변경사항

**app/login/page.tsx**
1. Import 추가
   - `useRouter` from "next/navigation"
   - `createClient` from "@/lib/supabase/client"

2. handleLogin 함수 구현
   - 이메일 형식 검증 (정규식)
   - 비밀번호 공백 방지 검증
   - Supabase `signInWithPassword` 메서드 호출
   - 사용자 친화적 에러 메시지
   - 성공 시 1초 후 메인 페이지(/)로 리다이렉트
   - `router.refresh()`로 서버 컴포넌트 갱신

**components/auth/LogoutButton.tsx (신규)**
1. 로그아웃 버튼 컴포넌트
2. `handleLogout` 함수
   - `supabase.auth.signOut()` 호출
   - 성공 시 로그인 페이지(/login)로 이동
   - 에러 처리 및 메시지 표시
3. 로딩 상태 처리
4. LogOut 아이콘 포함

## 특이사항

- 로그인 성공 시 Supabase가 자동으로 세션 생성 및 쿠키 저장
- 로그아웃 시 세션이 완전히 제거되고 쿠키도 삭제됨
- `router.refresh()`로 서버 컴포넌트가 새 세션 상태를 반영
- LogoutButton은 헤더나 상단 영역에서 조건부 렌더링으로 사용 가능
