# AI 프롬프트 개선 (날짜 처리 및 분석 정교화)

**작성시각**: 2026-01-11 20:26

## 해결하고자 한 문제

1. AI 할 일 생성의 날짜 처리 정확도 개선
2. AI 분석 기능의 인사이트 품질 향상

## 해결된 것

### 1. 날짜 처리 규칙 개선

✅ **"오늘 ~까지" 시간 처리**
- "오늘 ~까지", "오늘 중", "오늘 안에" → 23:59 (당일 자정)
- 기존: 09:00 기본값
- 개선: 당일 마감의 경우 자정으로 설정

✅ **"다음 주까지" 정의 명확화**
- "다음 주까지", "다음주까지" → 다음 주 일요일 (다음 주의 마지막 날)
- 기존: 다음 주 월요일로 잘못 해석
- 개선: 다음 주 일요일 23:59로 정확히 설정

✅ **과거 날짜 체크 로직 수정**
- 미래 시각 보존 (예: "오늘 오후 10시 30분" → 정확히 22:30)
- 실제 과거인 경우만 조정

### 2. AI 분석 프롬프트 정교화

✅ **완료율 분석**
```
- 일일/주간 완료율 평가 및 격려
- 우선순위별 완료 패턴 파악
- 완료율에 따른 칭찬/격려 메시지
```

✅ **시간 관리 분석**
```
- 마감일 준수율 계산
- 연기된 할 일의 빈도 및 패턴
- 시간대별 업무 집중도 분석
- 효율적인 시간 활용 방법 제안
```

✅ **생산성 패턴**
```
- 가장 생산적인 시간대 도출
- 자주 미루는 작업 유형 식별
- 완료하기 쉬운 작업의 특징
- 업무 과부하 여부 판단
```

✅ **실행 가능한 추천**
```
- 구체적인 시간 관리 팁
- 우선순위 조정 제안
- 일정 재배치 전략
- 업무 분산 전략
```

✅ **긍정적인 피드백**
```
- 잘하고 있는 부분 강조
- 개선점을 격려하는 톤
- 동기부여 메시지
- 성취감 부여
```

✅ **기간별 차별화**
```
오늘의 요약:
- 당일 집중도 분석
- 남은 할 일 우선순위
- 현실적인 목표 제안
- 내일 준비 사항

이번 주 요약:
- 주간 패턴 분석
- 이번 주 성과 요약
- 다음 주 계획 제안
- 주말 활용 방법
```

## 해결되지 않은 것

없음 - 모든 개선 사항이 정상 작동함

## 테스트 결과

### 날짜 처리 테스트
- ✅ "오늘 인프런 ai교재 배포 전까지 완료하기" → `2026-01-11 23:59`
- ✅ "오늘 오후 10시반 취침" → `2026-01-11 22:30`
- ✅ "다음주까지 패캠 강의 완강하기" → `2026-01-19 23:59`
- ✅ "이번 주 금요일까지 6주차 기획과제" → `2026-01-17 09:00`

### AI 분석 테스트
- ✅ 완료율 분석 및 격려 메시지
- ✅ 시간대별 집중도 분석
- ✅ 생산성 패턴 도출
- ✅ 구체적이고 실행 가능한 추천
- ✅ 긍정적이고 동기부여되는 피드백

## 향후 개발을 위한 컨텍스트 정리

### 날짜 처리 규칙 (최종)
```
오늘: 현재 날짜
내일: 현재 날짜 + 1일
모레: 현재 날짜 + 2일
이번 주 금요일: 가장 가까운 금요일
다음 주까지: 다음 주 일요일 23:59
다음 주 월요일: 다음 주의 월요일

시간 처리:
- 오늘 ~까지 (시간 미명시): 23:59
- 기타 (시간 미명시): 09:00
- 아침: 09:00, 점심: 12:00, 오후: 14:00, 저녁: 18:00, 밤: 21:00
```

### AI 분석 프롬프트 구조
```
1. 분석 가이드라인 (6개 섹션)
   - 완료율 분석
   - 시간 관리 분석
   - 생산성 패턴
   - 실행 가능한 추천
   - 긍정적인 피드백
   - 기간별 차별화

2. 출력 형식
   - summary: 전체 요약 (긍정적, 격려)
   - urgentTasks: 긴급 작업 (최대 5개)
   - insights: 데이터 기반 인사이트 (3-5개)
   - recommendations: 실행 가능한 추천 (3-5개)
```

### 개선 효과
- 날짜/시간 정확도 향상
- 사용자 의도 파악 개선
- AI 분석 품질 대폭 향상
- 실용적이고 동기부여되는 조언 제공
