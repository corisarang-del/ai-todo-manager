# Claude Delegator 사용 가이드

> **작성일**: 2026-01-11
> **목적**: Claude Code에서 GPT-5.2 Codex 전문가 에이전트 활용법
> **대상**: AI 기반 개발 워크플로우 최적화

---

## 📋 개요

**Claude Delegator**는 Claude Code 내에서 OpenAI GPT-5.2 Codex 기반의 5가지 전문가 에이전트를 호출할 수 있는 플러그인. Claude가 오케스트레이터 역할을 하며, 작업 유형에 따라 적절한 GPT 전문가에게 위임.

### 핵심 개념

```
사용자 요청 → Claude Code → [트리거 매칭 → 전문가 선택]
                                    ↓
              ┌─────────────────────┼─────────────────────┐
              ↓                     ↓                     ↓
         Architect            Code Reviewer        Security Analyst
              ↓                     ↓                     ↓
    [자문(읽기 전용) OR 구현(작업공간 쓰기)]
              ↓                     ↓                     ↓
    Claude가 응답 통합 ←──┴──────────────────────┘
```

---

## 🎯 5가지 전문가 에이전트

### 1. Architect (아키텍트)

**전문 분야**: 시스템 설계, 기술 전략, 복잡한 의사결정

**언제 사용하나**:
- 시스템 아키텍처 설계 결정
- 데이터베이스 스키마 설계
- API 아키텍처 구성
- 여러 서비스 간 상호작용
- 성능 최적화 전략
- 2회 이상 실패한 수정 시도 후 (새로운 관점 필요)
- 여러 접근법 간 트레이드오프 분석

**트리거 예시**:
```
"이 서비스를 어떻게 구조화해야 할까?"
"Redis와 인메모리 캐싱의 트레이드오프는?"
"마이크로서비스와 모놀리스 중 어떤 걸 사용해야 할까?"
"알림 시스템을 설계해줘"
```

**응답 형식** (자문 모드):
- **결론**: 2-3문장으로 권장사항 요약
- **실행 계획**: 구현 단계별 번호 매김
- **작업량 추정**: Quick(<1h), Short(1-4h), Medium(1-2d), Large(3d+)
- **위험 요소**: 예외 케이스 및 완화 전략

**사용 예시**:
```
# 자문 요청
"Redis와 인메모리 캐싱의 트레이드오프를 GPT 아키텍트에게 분석해줘"

# 구현 요청
"캐싱 레이어를 Redis로 리팩토링해줘"
```

---

### 2. Plan Reviewer (계획 검토자)

**전문 분야**: 작업 계획 검증, 사전 실행 타당성 검토

**언제 사용하나**:
- 중요한 작업을 시작하기 전 계획 검증
- 구현 계획의 완성도 평가
- 마이그레이션 계획 리뷰
- 접근 방식의 타당성 검증

**트리거 예시**:
```
"이 마이그레이션 계획을 검토해줘"
"이 구현 계획이 완전한가?"
"시작하기 전에 내 접근 방식을 검증해줘"
```

**응답 형식** (자문 모드):
- **계획 평가**: 전체적인 평가
- **누락된 요소**: 빠진 단계나 고려사항
- **위험 요소**: 잠재적 문제점
- **개선 제안**: 계획 강화 방안
- **승인 여부**: APPROVE / NEEDS REVISION / REJECT

---

### 3. Scope Analyst (범위 분석가)

**전문 분야**: 요구사항 분석, 사전 계획 단계 모호함 포착

**언제 사용하나**:
- 요구사항이 모호하거나 불명확할 때
- 기능 범위를 명확히 해야 할 때
- 작업 시작 전 누락된 요소 파악
- 사전 계획 상담

**트리거 예시**:
```
"이 요구사항에서 빠진 게 뭐야?"
"이 기능의 범위를 명확히 해줘"
"시작하기 전에 상담이 필요해"
```

**응답 형식** (자문 모드):
- **범위 명확화**: 명확히 정의된 범위
- **모호한 부분**: 추가 명확화가 필요한 영역
- **가정 사항**: 묵시적 가정 목록
- **추천 질문**: 명확화를 위한 질문들
- **범위 내/외**: 포함/제외 항목

---

### 4. Code Reviewer (코드 리뷰어)

**전문 분야**: 코드 품질, 버그 발견, 유지보수성 개선

**언제 사용하나**:
- 중요한 변경사항 병합 전
- 기능 구현 후 자체 리뷰
- 코드가 "이상해" 보이는데 원인을 모를 때
- 보안에 민감한 코드 변경
- 낯선 코드에 적응할 때

**리뷰 우선순위**:

1. **정확성**: 코드가 의도대로 동작하는가?
2. **보안**: 입력 검증, SQL 인젝션, XSS 등
3. **성능**: N+1 쿼리, 메모리 누수 등
4. **유지보수성**: 이해 가능성, 에러 처리 등

**트리거 예시**:
```
"이 PR을 리뷰해줘"
"이 구현에서 문제점을 찾아줘"
"이 함수가 뭐가 잘못됐어?"
```

**응답 형식** (자문 모드):
```
**요약**: 전체 평가 1-2문장

**심각한 문제** (반드시 수정):
- [문제]: [위치] - [중요한 이유] - [수정 제안]

**권장사항** (고려해야 함):
- [문제]: [위치] - [중요한 이유] - [수정 제안]

**판정**: APPROVE / REQUEST CHANGES / REJECT
```

**사용 예시**:
```
# 리뷰만 요청 (자문 모드)
"GPT에게 이 PR을 리뷰해달라고 해줘"

# 리뷰 후 수정까지 요청 (구현 모드)
"GPT에게 이 코드의 문제를 찾아서 수정해달라고 해줘"
```

---

### 5. Security Analyst (보안 분석가)

**전문 분야**: 취약점 평가, 위협 모델링, OWASP Top 10

**언제 사용하나**:
- 인증/권한 부여 변경 배포 전
- 민감한 데이터 처리 시 (PII, 자격증명, 결제)
- 새로운 API 엔드포인트 추가 후
- 제3자 서비스 통합 시
- 주기적인 보안 감사
- 의심스러운 동작 감지 시

**분석 프레임워크** (OWASP Top 10):
- Injection (SQL, NoSQL, OS 명령어 인젝션)
- Broken Authentication (약한 비밀번호, 세션 문제)
- Sensitive Data Exposure (암호화되지 않은 저장/전송)
- XML External Entities (XXE)
- Broken Access Control (권한 부여 검사 누락)
- Security Misconfiguration (기본 자격증명, 상세 오류)
- Cross-Site Scripting (XSS)
- Insecure Deserialization
- Using Components with Known Vulnerabilities
- Insufficient Logging & Monitoring

**트리거 예시**:
```
"이 인증 흐름이 안전한가?"
"이 토큰 처리에 취약점이 있어?"
"이 엔드포인트를 강화해줘"
"이 API의 위협 모델을 만들어줘"
```

**응답 형식** (자문 모드):
```
**위협 요약**: 전체 보안 태세에 대한 1-2문장

**심각한 취약점** (악용 위험: 높음):
- [취약점]: [위치] - [영향] - [해결 방법]

**고위험 문제** (조만간 수정 필요):
- [문제]: [위치] - [영향] - [해결 방법]

**권장사항** (보안 강화 제안):
- [제안]: [이점]

**위험 등급**: CRITICAL / HIGH / MEDIUM / LOW
```

**사용 예시**:
```
# 보안 검토 요청 (자문 모드)
"GPT 보안 전문가에게 이 인증 흐름을 검토해달라고 해줘"

# 취약점 수정 요청 (구현 모드)
"user.ts의 SQL 인젝션 취약점을 수정해줘"
```

---

## 🎨 사용 방법

### 자동 위임 (권장)

Claude가 자동으로 적절한 전문가를 선택:

```
# Architect 자동 호출
"이 서비스를 어떻게 구조화해야 할까?"

# Security Analyst 자동 호출
"이 인증 흐름이 안전한가?"

# Code Reviewer 자동 호출
"이 PR을 리뷰해줘"
```

### 명시적 호출

특정 전문가를 직접 지정:

```
"GPT 아키텍트에게 이 시스템 설계를 분석해달라고 해줘"
"GPT 보안 전문가에게 취약점을 찾아달라고 해줘"
"GPT 코드 리뷰어에게 이 함수를 검토해달라고 해줘"
```

---

## 💡 동작 모드

모든 전문가는 2가지 모드로 작동:

| 모드 | 샌드박스 | 용도 |
|------|----------|------|
| **자문 모드** | `read-only` | 분석, 권장사항, 리뷰 의견 |
| **구현 모드** | `workspace-write` | 실제 변경, 문제 수정 |

Claude가 작업 요청에 따라 자동으로 모드 선택.

### 예시 비교

```typescript
// Architect 분석 (자문 모드)
"Redis와 인메모리 캐싱의 트레이드오프를 분석해줘"
→ 읽기 전용, 분석 보고서 반환

// Architect 구현 (구현 모드)
"캐싱 레이어를 Redis로 리팩토링해줘"
→ 작업공간 쓰기, 파일 수정

// Security Analyst 검토 (자문 모드)
"이 인증 흐름의 취약점을 검토해줘"
→ 읽기 전용, 취약점 보고서

// Security Analyst 강화 (구현 모드)
"user.ts의 SQL 인젝션을 수정해줘"
→ 작업공간 쓰기, 취약점 수정
```

---

## 📚 실전 사용 시나리오

### 시나리오 1: 새로운 기능 아키텍처 설계

```
1. 사용자: "실시간 알림 시스템을 추가하려고 하는데, WebSocket과 Server-Sent Events 중 뭘 써야 할까?"
   → Architect 자동 호출 (자문 모드)
   → 트레이드오프 분석, 권장사항 제공

2. 사용자: "그럼 추천한 방식으로 구현해줘"
   → Architect (구현 모드)
   → 실제 코드 작성
```

### 시나리오 2: PR 리뷰 워크플로우

```
1. 개발자: 기능 구현 완료
2. 사용자: "GPT에게 이 PR을 리뷰해달라고 해줘"
   → Code Reviewer 명시적 호출 (자문 모드)
   → 문제점 리스트 반환

3. 사용자: "발견된 문제들을 수정해줘"
   → Code Reviewer (구현 모드)
   → 파일 수정, 검증 완료 보고
```

### 시나리오 3: 보안 감사

```
1. 사용자: "새로운 결제 API 엔드포인트를 추가했어. 보안 검토 필요해"
   → Security Analyst 자동 호출 (자문 모드)
   → 취약점 스캔, 위협 모델링

2. 리뷰 결과: CRITICAL - SQL Injection 취약점 발견
3. 사용자: "발견된 취약점들을 수정해줘"
   → Security Analyst (구현 모드)
   → 취약점 수정, 보안 강화
```

### 시나리오 4: 복잡한 버그 디버깅 (2회 실패 후)

```
1. 개발자: 버그 수정 시도 1회 - 실패
2. 개발자: 버그 수정 시도 2회 - 실패
3. 사용자: "이 버그를 2번이나 수정하려고 했는데 계속 실패해"
   → Architect 자동 호출 (자문 모드)
   → 새로운 관점에서 근본 원인 분석

4. Architect: "문제는 멀티스레딩 race condition이에요. 접근 방식을 바꿔야 합니다"
   → 솔루션 제시
```

### 시나리오 5: 프로젝트 초기 범위 정의

```
1. 사용자: "사용자 인증 기능을 추가하려고 하는데, 요구사항이 모호해"
   → Scope Analyst 자동 호출 (자문 모드)
   → 누락된 요구사항 파악

2. Scope Analyst: "다음 사항들을 명확히 해야 합니다:
   - OAuth vs JWT vs 세션 기반?
   - 비밀번호 재설정 프로세스는?
   - 다중 기기 로그인 허용 여부는?
   - 소셜 로그인 통합은?"

3. 요구사항 명확화 후
4. 사용자: "이 계획을 GPT에게 검토해달라고 해줘"
   → Plan Reviewer (자문 모드)
   → 계획 검증, 개선 제안
```

---

## ⚠️ 사용하지 말아야 할 경우

| 상황 | 이유 |
|------|------|
| 간단한 문법 질문 | 직접 답변이 더 빠름 |
| 파일 읽기/쓰기 같은 단순 작업 | 외부 인사이트 불필요 |
| 명백한 버그 수정 | 솔루션이 자명함 |
| 연구/문서화 작업 | 다른 도구 사용 |
| 첫 번째 수정 시도 | 먼저 직접 시도 |
| 사소한 네이밍 문제 | 스타일 선호도 문제 |

---

## 🔧 고급 팁

### 1. 재시도 처리

각 전문가 호출은 상태가 없음(stateless). 재시도 시 전체 컨텍스트 포함 필요:

```
1차 시도 실패 → 새 호출 시 원래 작업 + 에러 상세 정보 포함
최대 3회 재시도 → 실패 시 사용자에게 에스컬레이션
```

### 2. 효율적인 전문가 활용

```
# 나쁜 예 - 전문가 낭비
"변수 이름을 camelCase로 바꿔줘"
→ GPT 불필요, Claude가 직접 처리 가능

# 좋은 예 - 전문가 활용 적절
"이 마이크로서비스 아키텍처의 트레이드오프를 분석해줘"
→ Architect의 전문성 필요
```

### 3. 작업량 추정 활용

Architect가 제공하는 작업량 추정을 프로젝트 계획에 반영:

- **Quick** (<1h): 즉시 진행
- **Short** (1-4h): 오늘 완료 가능
- **Medium** (1-2d): 스프린트에 포함
- **Large** (3d+): 여러 단계로 분할 고려

---

## 📊 의사결정 프레임워크

전문가 선택 우선순위:

```
1. 명시적 사용자 요청 - 항상 우선
2. 보안 문제 - 민감한 데이터/인증 처리 시
3. 아키텍처 결정 - 장기 영향이 있는 시스템 설계
4. 실패 에스컬레이션 - 2회 이상 실패 후
5. 위임하지 않음 - 기본: 직접 처리
```

---

## 🎯 베스트 프랙티스

### DO ✅

- 복잡한 아키텍처 결정 전 Architect와 상담
- 중요한 변경사항 병합 전 Code Reviewer 활용
- 인증/보안 관련 코드는 Security Analyst 검토
- 모호한 요구사항은 Scope Analyst로 명확화
- 큰 작업 시작 전 Plan Reviewer로 계획 검증

### DON'T ❌

- 사소한 문법 질문에 전문가 호출
- 첫 시도부터 전문가에게 의존
- 스타일 선호도 문제로 전문가 활용
- 이미 명백한 솔루션에 전문가 호출
- 단순 파일 작업에 전문가 사용

---

## 🔍 문제 해결

### 전문가가 자동으로 호출되지 않을 때

```
# 명시적으로 호출
"GPT [전문가]에게 [작업]을 해달라고 해줘"

예시:
"GPT 아키텍트에게 이 설계를 검토해달라고 해줘"
"GPT 보안 전문가에게 취약점을 찾아달라고 해줘"
```

### MCP 서버 연결 문제

```bash
# MCP 서버 직접 테스트
codex -m gpt-5.2-codex mcp-server --help

# 로그인 상태 확인
codex whoami

# 재인증
codex logout
codex login
```

### 응답이 기대와 다를 때

더 구체적인 컨텍스트 제공:

```
# 모호한 요청
"이 코드를 리뷰해줘"

# 구체적인 요청
"이 인증 관련 코드를 보안 관점에서 리뷰해줘. 특히 SQL 인젝션과 XSS 취약점을 중점적으로 확인해줘"
```

---

## 📖 참고 자료

- [OpenAI Codex 문서](https://openai.com/index/introducing-gpt-5.2-codex/)
- [Codex CLI npm](https://www.npmjs.com/package/@openai/codex)
- [Claude Delegator GitHub](https://github.com/jarrodwatts/claude-delegator)
- [Claude Code 문서](https://docs.anthropic.com/en/docs/claude-code)
- [oh-my-opencode](https://github.com/code-yeongyu/oh-my-opencode) (전문가 프롬프트 기반)

---

## 📝 체크리스트

프로젝트에서 Claude Delegator 활용하기:

- [ ] 새로운 기능 설계 시 Architect 자문
- [ ] PR 병합 전 Code Reviewer 리뷰
- [ ] 인증/보안 코드는 Security Analyst 검토
- [ ] 모호한 요구사항은 Scope Analyst로 명확화
- [ ] 큰 작업 전 Plan Reviewer로 계획 검증
- [ ] 2회 이상 실패 시 Architect에게 에스컬레이션
- [ ] 보안 민감 API는 배포 전 Security Analyst 감사

---

**작성**: 2026-01-11
**버전**: 1.0
**태그**: #claude-code #gpt-5.2-codex #ai-delegation #개발도구
