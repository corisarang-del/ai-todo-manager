# 회원가입 페이지 Supabase 연동

**작성시각**: 2026-01-09 14:16

## 해결하고자 한 문제

`app/signup/page.tsx` 파일에 실제 동작하는 Supabase 회원가입 기능 구현

### 요구사항
- 폼 데이터 수집 및 유효성 검사 (이메일 형식, 비밀번호 길이)
- Supabase signUp 함수 호출
- 성공/실패 시 처리
- 로딩 상태 처리 (중복 클릭 방지)

## 해결된 것

✅ **Import 추가**
- `useRouter`: 회원가입 성공 시 페이지 이동
- `createClient`: Supabase 클라이언트 생성

✅ **상태 관리**
- `name` 상태 추가: 사용자 이름 입력

✅ **폼 유효성 검사**
- 모든 필드 필수 입력 확인
- 이메일 형식 정규식 검증
- 비밀번호 일치 확인
- 비밀번호 최소 길이 (6자) 확인

✅ **Supabase 회원가입 구현**
```typescript
const { data, error: signUpError } = await supabase.auth.signUp({
  email,
  password,
  options: {
    data: {
      display_name: name,
    },
  },
});
```

✅ **사용자 친화적 에러 처리**
- "이미 등록된 이메일이야"
- "비밀번호가 너무 약해. 더 강력한 비밀번호를 사용해줘"
- 기타 에러 메시지

✅ **로딩 상태 처리**
- `isLoading` 상태로 버튼 비활성화
- 로딩 중 "회원가입 중..." 텍스트 표시

✅ **성공 처리**
- 성공 메시지 표시
- 1.5초 후 메인 페이지(/)로 자동 이동

✅ **UI 추가**
- 이름 입력 필드 추가 (홍길동 placeholder)

## 해결되지 않은 것

없음

## 향후 개발을 위한 컨텍스트 정리

### 회원가입 흐름

1. 사용자가 이름, 이메일, 비밀번호 입력
2. 클라이언트 측 유효성 검사
3. Supabase `signUp` 호출
4. `schema.sql`의 `handle_new_user()` 트리거가 자동으로 `public.users` 테이블에 프로필 생성
5. 성공 시 세션 자동 생성되어 로그인 상태가 됨
6. 메인 페이지(/)로 리다이렉트

### Supabase 이메일 확인 설정

Supabase Dashboard > Authentication > Email Templates에서:
- **Confirm signup**: 이메일 확인 활성화/비활성화
- 개발 중에는 이메일 확인을 비활성화할 수 있음

### 테스트 방법

1. 개발 서버 실행: `npm run dev`
2. `/signup` 페이지 접속
3. 이름, 이메일, 비밀번호 입력
4. 회원가입 버튼 클릭
5. 성공 메시지 확인
6. 메인 페이지(/)로 자동 이동 확인

### 다음 단계

1. 로그인 페이지에도 Supabase 연동 (`app/login/page.tsx`)
2. 인증 상태 확인 및 라우트 보호
3. 로그아웃 기능 구현
4. 사용자 프로필 페이지 구현
